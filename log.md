client.ts:19 [vite] connecting...
client.ts:155 [vite] connected.
chunk-G52XTN3B.js?v=1f0d61d0:21580 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
index.ts:64 🔍 Environment Detection Debug: {detected: 'development', available: Array(3), exists: true, viteMode: 'development', viteEnv: 'development', …}
index.ts:141 🎮 GamingDronzz Configuration
index.ts:142 🏷️ Environment: development
index.ts:143 ⚙️ Config: {api: {…}, supabase: {…}, google: {…}, app: {…}, analytics: {…}, …}
index.ts:144 🏗️ Build Info: {version: '1.0.0', buildTime: '2025-08-30T06:40:39.620Z', environment: 'development', gitBranch: 'development'}
index.ts:145 🎯 API Endpoint: http://localhost:3001/api
index.ts:146 🔧 Features: {adminPanel: true, debugMode: true, mockData: true, performanceLogging: true}
index.ts:149 📊 Performance Targets: {fcp: 1500, lcp: 2500, fid: 100, cls: 0.1}
index.ts:179 ✅ Configuration validation passed
SupabaseService.ts:44 SupabaseService initialized
SupabaseService.ts:45 URL: https://kjntsckfsktefmfydlfm.supabase.co
SupabaseService.ts:46 Redirect URL will be: http://localhost:3000
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: true, isAuthenticated: false, hasUser: false, hasSession: false, userId: 'none'}
useAuth.ts:37 useAuth: Initializing...
SupabaseService.ts:238 🔊 Setting up auth state change listener...
SupabaseService.ts:251 ✅ Auth state listener setup complete
SupabaseService.ts:140 🔍 Getting current session...
ThemeManager.ts:168 🎨 ThemeManager: Applied theme: Retro Arcade (retro-arcade)
ThemeManager.ts:168 🎨 ThemeManager: ThemeManager initialized with theme: Retro Arcade (🎮)
useAuth.ts:74 useAuth: Cleaning up listener
SupabaseService.ts:254 🔊 Unsubscribing auth state listener...
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: true, isAuthenticated: false, hasUser: false, hasSession: false, userId: 'none'}
useAuth.ts:37 useAuth: Initializing...
SupabaseService.ts:238 🔊 Setting up auth state change listener...
SupabaseService.ts:251 ✅ Auth state listener setup complete
SupabaseService.ts:140 🔍 Getting current session...
ThemeManager.ts:168 🎨 ThemeManager: ThemeManager already initialized
SupabaseService.ts:240 🔔 SUPABASE AUTH EVENT: {event: 'SIGNED_IN', timestamp: '2025-08-30T10:38:02.753Z', sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', …}
useAuth.ts:60 🎯 AUTH STATE CHANGE EVENT: {event: 'SIGNED_IN', userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', timestamp: '2025-08-30T10:38:02.753Z', sessionExists: true, …}
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:143 📋 Session check result: {sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', isValid: true, shouldRefresh: false, …}
useAuth.ts:50 useAuth: Initial session: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:240 🔔 SUPABASE AUTH EVENT: {event: 'INITIAL_SESSION', timestamp: '2025-08-30T10:38:02.772Z', sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', …}
useAuth.ts:60 🎯 AUTH STATE CHANGE EVENT: {event: 'INITIAL_SESSION', userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', timestamp: '2025-08-30T10:38:02.772Z', sessionExists: true, …}
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:143 📋 Session check result: {sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', isValid: true, shouldRefresh: false, …}
useAuth.ts:50 useAuth: Initial session: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
(anonymous) @ useAuth.ts:68
(anonymous) @ SupabaseService.ts:248
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6988
_notifyAllSubscribers @ @supabase_supabase-js.js?v=1f0d61d0:6986
_recoverAndRefresh @ @supabase_supabase-js.js?v=1f0d61d0:6929
await in _recoverAndRefresh
_initialize @ @supabase_supabase-js.js?v=1f0d61d0:5600
await in _initialize
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:5554
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6232
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:5349
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
getInitialSession @ useAuth.ts:51
await in getInitialSession
(anonymous) @ useAuth.ts:71
commitHookEffectListMount @ chunk-G52XTN3B.js?v=1f0d61d0:16936
commitPassiveMountOnFiber @ chunk-G52XTN3B.js?v=1f0d61d0:18184
commitPassiveMountEffects_complete @ chunk-G52XTN3B.js?v=1f0d61d0:18157
commitPassiveMountEffects_begin @ chunk-G52XTN3B.js?v=1f0d61d0:18147
commitPassiveMountEffects @ chunk-G52XTN3B.js?v=1f0d61d0:18137
flushPassiveEffectsImpl @ chunk-G52XTN3B.js?v=1f0d61d0:19518
flushPassiveEffects @ chunk-G52XTN3B.js?v=1f0d61d0:19475
(anonymous) @ chunk-G52XTN3B.js?v=1f0d61d0:19356
workLoop @ chunk-G52XTN3B.js?v=1f0d61d0:197
flushWork @ chunk-G52XTN3B.js?v=1f0d61d0:176
performWorkUntilDeadline @ chunk-G52XTN3B.js?v=1f0d61d0:384
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
(anonymous) @ useAuth.ts:68
(anonymous) @ SupabaseService.ts:248
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6692
_useSession @ @supabase_supabase-js.js?v=1f0d61d0:6265
await in _useSession
_emitInitialSession @ @supabase_supabase-js.js?v=1f0d61d0:6686
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6680
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6232
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:5349
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
getInitialSession @ useAuth.ts:51
await in getInitialSession
(anonymous) @ useAuth.ts:71
commitHookEffectListMount @ chunk-G52XTN3B.js?v=1f0d61d0:16936
invokePassiveEffectMountInDEV @ chunk-G52XTN3B.js?v=1f0d61d0:18352
invokeEffectsInDev @ chunk-G52XTN3B.js?v=1f0d61d0:19729
commitDoubleInvokeEffectsInDEV @ chunk-G52XTN3B.js?v=1f0d61d0:19714
flushPassiveEffectsImpl @ chunk-G52XTN3B.js?v=1f0d61d0:19531
flushPassiveEffects @ chunk-G52XTN3B.js?v=1f0d61d0:19475
(anonymous) @ chunk-G52XTN3B.js?v=1f0d61d0:19356
workLoop @ chunk-G52XTN3B.js?v=1f0d61d0:197
flushWork @ chunk-G52XTN3B.js?v=1f0d61d0:176
performWorkUntilDeadline @ chunk-G52XTN3B.js?v=1f0d61d0:384
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: true, isAuthenticated: false, hasUser: false, hasSession: false, userId: 'none'}
useAuth.ts:37 useAuth: Initializing...
SupabaseService.ts:238 🔊 Setting up auth state change listener...
SupabaseService.ts:251 ✅ Auth state listener setup complete
SupabaseService.ts:140 🔍 Getting current session...
useAuth.ts:74 useAuth: Cleaning up listener
SupabaseService.ts:254 🔊 Unsubscribing auth state listener...
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: true, isAuthenticated: false, hasUser: false, hasSession: false, userId: 'none'}
useAuth.ts:37 useAuth: Initializing...
SupabaseService.ts:238 🔊 Setting up auth state change listener...
SupabaseService.ts:251 ✅ Auth state listener setup complete
SupabaseService.ts:140 🔍 Getting current session...
SupabaseService.ts:143 📋 Session check result: {sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', isValid: true, shouldRefresh: false, …}
useAuth.ts:50 useAuth: Initial session: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:240 🔔 SUPABASE AUTH EVENT: {event: 'INITIAL_SESSION', timestamp: '2025-08-30T10:38:04.890Z', sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', …}
useAuth.ts:60 🎯 AUTH STATE CHANGE EVENT: {event: 'INITIAL_SESSION', userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', timestamp: '2025-08-30T10:38:04.890Z', sessionExists: true, …}
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:143 📋 Session check result: {sessionExists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', isValid: true, shouldRefresh: false, …}
useAuth.ts:50 useAuth: Initial session: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
useAuth.ts:80 🔄 updateAuthState called
useAuth.ts:81 📋 Session details: {exists: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', userEmail: 'biggsthegamer@gmail.com', expiresAt: Sat Aug 30 2025 17:07:50 GMT+0530 (India Standard Time), accessToken: '***EXISTS***', …}
useAuth.ts:91 🔍 CHECKPOINT 1: About to process session...
useAuth.ts:112 ✅ Valid session found - updating authenticated state
useAuth.ts:113 👤 User info: {id: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab', email: 'biggsthegamer@gmail.com', emailVerified: '2025-08-26T18:47:48.761996Z', lastSignIn: '2025-08-28T12:09:43.593977Z', provider: 'google'}
useAuth.ts:121 🔍 CHECKPOINT 2: About to check admin status...
useAuth.ts:124 🔍 Checking admin status...
SupabaseService.ts:266 🔍 ADMIN CHECK: Querying profiles table for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
getInitialSession @ useAuth.ts:51
await in getInitialSession
(anonymous) @ useAuth.ts:71
commitHookEffectListMount @ chunk-G52XTN3B.js?v=1f0d61d0:16936
commitPassiveMountOnFiber @ chunk-G52XTN3B.js?v=1f0d61d0:18184
commitPassiveMountEffects_complete @ chunk-G52XTN3B.js?v=1f0d61d0:18157
commitPassiveMountEffects_begin @ chunk-G52XTN3B.js?v=1f0d61d0:18147
commitPassiveMountEffects @ chunk-G52XTN3B.js?v=1f0d61d0:18137
flushPassiveEffectsImpl @ chunk-G52XTN3B.js?v=1f0d61d0:19518
flushPassiveEffects @ chunk-G52XTN3B.js?v=1f0d61d0:19475
(anonymous) @ chunk-G52XTN3B.js?v=1f0d61d0:19356
workLoop @ chunk-G52XTN3B.js?v=1f0d61d0:197
flushWork @ chunk-G52XTN3B.js?v=1f0d61d0:176
performWorkUntilDeadline @ chunk-G52XTN3B.js?v=1f0d61d0:384
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
(anonymous) @ useAuth.ts:68
(anonymous) @ SupabaseService.ts:248
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6692
_useSession @ @supabase_supabase-js.js?v=1f0d61d0:6265
await in _useSession
_emitInitialSession @ @supabase_supabase-js.js?v=1f0d61d0:6686
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6680
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:6232
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:5349
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
@supabase_supabase-js.js?v=1f0d61d0:4216  GET https://kjntsckfsktefmfydlfm.supabase.co/rest/v1/profiles?select=role&user_id=eq.7fe6db7e-88d5-4c25-b616-8f7441b6cdab 500 (Internal Server Error)
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4216
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4237
fulfilled @ @supabase_supabase-js.js?v=1f0d61d0:4189
Promise.then
step @ @supabase_supabase-js.js?v=1f0d61d0:4202
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4204
__awaiter6 @ @supabase_supabase-js.js?v=1f0d61d0:4186
(anonymous) @ @supabase_supabase-js.js?v=1f0d61d0:4227
then @ @supabase_supabase-js.js?v=1f0d61d0:89
SupabaseService.ts:273 🔍 ADMIN CHECK: Query result: {data: null, error: 'infinite recursion detected in policy for relation "profiles"'}
SupabaseService.ts:276 ❌ Admin check error: {code: '42P17', details: null, hint: null, message: 'infinite recursion detected in policy for relation "profiles"'}
isAdmin @ SupabaseService.ts:276
await in isAdmin
updateAuthState @ useAuth.ts:125
getInitialSession @ useAuth.ts:51
await in getInitialSession
(anonymous) @ useAuth.ts:71
commitHookEffectListMount @ chunk-G52XTN3B.js?v=1f0d61d0:16936
invokePassiveEffectMountInDEV @ chunk-G52XTN3B.js?v=1f0d61d0:18352
invokeEffectsInDev @ chunk-G52XTN3B.js?v=1f0d61d0:19729
commitDoubleInvokeEffectsInDEV @ chunk-G52XTN3B.js?v=1f0d61d0:19714
flushPassiveEffectsImpl @ chunk-G52XTN3B.js?v=1f0d61d0:19531
flushPassiveEffects @ chunk-G52XTN3B.js?v=1f0d61d0:19475
(anonymous) @ chunk-G52XTN3B.js?v=1f0d61d0:19356
workLoop @ chunk-G52XTN3B.js?v=1f0d61d0:197
flushWork @ chunk-G52XTN3B.js?v=1f0d61d0:176
performWorkUntilDeadline @ chunk-G52XTN3B.js?v=1f0d61d0:384
useAuth.ts:126 🛡️ Admin status: false
useAuth.ts:128 🔍 CHECKPOINT 3: Admin check complete, ensuring profile...
useAuth.ts:131 📝 Ensuring user profile exists...
SupabaseService.ts:405 🔍 PROFILE ENSURE: Starting profile ensure process...
SupabaseService.ts:418 🔍 PROFILE ENSURE: Calling ensure_user_profile RPC for userId: 7fe6db7e-88d5-4c25-b616-8f7441b6cdab
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
SupabaseService.ts:422 🔍 PROFILE ENSURE: RPC result: {data: {…}, error: 'none'}
SupabaseService.ts:439 🔍 PROFILE ENSURE: Final result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:133 📝 Profile result: {success: true, profileCreated: false, profileCompleted: true, error: null}
useAuth.ts:135 🔍 CHECKPOINT 4: Profile operations complete, setting final state...
useAuth.ts:149 🔓 Auth state set to: {user: {…}, session: '***SESSION_OBJECT***', loading: false, isAuthenticated: true, isAdmin: false, …}
useAuth.ts:158 🔍 CHECKPOINT 5: About to call setAuthState...
useAuth.ts:160 🔍 CHECKPOINT 6: setAuthState called successfully - auth flow COMPLETE
useAuth.ts:26 🔄 AUTH STATE CHANGED: {loading: false, isAuthenticated: true, hasUser: true, hasSession: true, userId: '7fe6db7e-88d5-4c25-b616-8f7441b6cdab'}
